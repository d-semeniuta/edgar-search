<!-- views/pages/search.ejs -->

<!DOCTYPE html>
<html lang="en">
<head>
    <% include ../partials/head %>
</head>
<body class="container">

    <header>
        <% include ../partials/header %>
    </header>

    <main>
		<% include ../partials/searchForm %>
		
		
		<div class="container">
			<% if(loadResults){ %>
			<p>Displaying the <%= (query.page - 1)*query.num_results + 1 %> through <%= (query.page)*query.num_results %> most recent results.</p>
				<table class="table table-hover">
					<thead>
						<tr>
							<th>Filing Type</th>
							<th>Description</th>
							<th>Filing Date</th>
							<th>HTML version</th>
						</tr>
					</thead>
					<tbody>
						<% filings.forEach(function(entry) { %>
							<tr>
								<th> <%= entry.filingType %> </th>
								<th> <%= entry.description %></th>
								<th> <%= entry.date%></th>
								<th> <a href="<%= entry.link %>" class="badge"> Link </a> </th>
							</tr>
						<% }); %>
					</tbody>
				</table>
			<% } else{ %>  
			   <h1>No results found for ticker symbol "<%= query.ticker_symbol %>" </h1>
			<% } %>

			
		</div>
		
    </main>

    <footer>

    </footer>

</body>
</html>